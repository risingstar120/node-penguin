extends layout

block content
	//- console.log(model)
	form.form-inline.pull-right(role='form')
		each v, n in urlQuery
			- if ('q'==n) continue;
			input(type='hidden', name=n, value=v)
		.form-group
			label.sr-only(for='penguin-search-q') Search
			input(type='text', id='penguin-search-q', name='q', placeholder='Search...')

			button.btn.btn-primary(type="submit") Search!


	table.table.table-striped.table-hover
		thead
			tr
				th #
				each field in model.fields
					if -1 != field.$p.display.indexOf('l')
						th
							- var sortParam = field.path
							if urlQuery.sort == field.path
								| &uArr;
								- sortParam = '-'+sortParam
							else if urlQuery.sort == '-'+field.path
								| &dArr;
							a(href=getQueryString({sort:sortParam}))=t(field.path)

		tbody
			each row in docs
				- var id = row._id.toString()
				tr(data-id=)
					td
						a(href='#{model.path}/#{id}') Edit
					each field in model.fields
						- if (-1 == field.$p.display.indexOf('l')) continue;
						if 'ObjectID' == field.instance
							td
								a(href='#{field.$p.getRefModel().path}/#{row[field.path]._id}')=row[field.path].$pTitle
						else
							td=row[field.path]
